### 非对称加密

Client要与Server进行通信，步骤如下：

1. Client生成一对密钥，即公钥和私钥，公钥加密的数据只能由私钥解密，私钥加密的数据只能由公钥解密
2. Client将公钥发送给Server
3. Server接收请求后，保存Client的公钥，同时也生成一对密钥，并将公钥传输给Client
4. 此后Client向Server发送数据，需用Server的公钥进行加密
5. Server向Client发送数据，需用Client的公钥进行加密

总结：安全性高，但效率低(一次数据交换需要进行两次加解密)

### 中间人攻击

非对称加密也并非绝对安全，在上述流程的2、3两步，若存在一个中间人M，其劫持Client向Server发送公钥的请求，其自己生成一个密钥key，分别发送给Client与Server。

则对于Client，它会认为key就是Server的公钥；对于Server它会认为key就是Client的公钥，同时将Server自己的的公钥发送给M。

那么此后对于Client和Server发送的信息，M都可以对其解密，因为前两者对信息加密的密钥都是由M伪造的。

此时，Client与Server之间的信息传输对M来说就是透明的了，M可以任意查看、篡改两种之间的数据传输内容，这就是中间人攻击。



### 加密与签名

假设Client向Server发送一个请求，在这个过程中需要保证两点：

1. 对于Client，它得保证接收方一定是Server
2. 对于Server，它得保证发送方一定是Client

解决方案如下：

1. 在发送请求时，使用Client自身的私钥对数据摘要进行签名
2. 然后再使用Server的公钥对数据内容进行加密
3. Server接收请求后首先使用自身私钥对请求数据进行解密
4. 然后使用Client公钥对数据摘要签名进行解签
5. 获取到数据内容和数据摘要就可以判断数据是否被篡改了

原理分析：Client发送请求时使用Server的公钥对数据内容进行加密，则只有Server才能对其进行解密，保证了要点1；接收数据时使用Client公钥对数据摘要签名进行解签，根据数据内容和数据摘要是否相符，可以判断请求是否是Client发的，如果请求不是Client发的或者被篡改过，则数据内容和数据摘要的对比一定是不成功的。